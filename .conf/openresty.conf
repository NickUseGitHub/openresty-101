events {
  worker_connections 512;
}

http {
  server {
    listen 8003;
    error_log  /usr/local/openresty/nginx/logs/nginx.error_log error;

    location / {
      content_by_lua '
        ngx.say("<p>hello, world</p>")
      ';
    }

    location /a {
      proxy_pass http://appa:8001/;
    }

    location /b {
      proxy_pass http://appb:8002/;
    }
  }
}